{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 17a3f2ffabcddb1fa915","webpack:///./src/index.js"],"names":["DynamicTruncator","element","text","_element","_text","words","Error","isTextValid","getTextFromElement","setHeightOnElement","getWordsFromText","isTruncationNeeded","startTruncating","height","getMaxHeight","innerText","i","length","addElipsis","scrollHeight","substring","replace","clientHeight","computedStyle","window","getComputedStyle","maxHeightComputedStyle","heightComputedStyle","parseInt","maxHeight","Math","max","isNaN","style","split"],"mappings":"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","file":"dynamic-truncator.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"dynamic-truncator\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dynamic-truncator\"] = factory();\n\telse\n\t\troot[\"dynamic-truncator\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 17a3f2ffabcddb1fa915","export class DynamicTruncator {\n\n  constructor(element, text) {\n    this._element = element;\n    this._text = text;\n    this.words = [];\n    if (!this._element) {\n      throw new Error('Dynamic Truncator: Element is required');\n    }\n\n    // Check if text is supplied, if not - get the one from the element\n    if (!this.isTextValid()) {\n      this._text = this.getTextFromElement();\n\n      if (!this.isTextValid()) {\n        throw new Error('Dynamic Truncator: No text found in element');\n      }\n    }\n\n    // Set height 100% to element to prevent IE bug\n    this.setHeightOnElement(100);\n    this.words = this.getWordsFromText();\n\n    if (this.isTruncationNeeded()) { // if text is overflown, truncate it\n      this.startTruncating();\n    }\n  }\n\n  startTruncating() {\n    //get max height of text element\n    var height = this.getMaxHeight();\n    // clear text in element\n    this._element.innerText = '';\n    // add each word in the words array to the element and check for overflow, if overflown - add ellipsis and stop\n    for (var i = 0; i < this.words.length; i += 1) {\n      this._element.innerText = this._element.innerText + ' ' + this.words[i];\n      // if dots added, break\n      if (this.addElipsis(i, height)) {\n        break;\n      }\n    }\n  }\n\n  addElipsis(i, height) {\n    // if text element is now overflown add elipsis\n    if (this._element.scrollHeight > height && this._element.innerText.length > 0) {\n      this._element.innerText = this._element.innerText.substring(0, this._element.innerText.length - this.words[i].length - 1); // remove last word\n      // replace special chars at the end of the word and replace them with three dots\n      this._element.innerText = this._element.innerText.substring(0, this._element.innerText.length - 1) + this._element.innerText[this._element.innerText.length - 1].replace(/(_|\\+|\\.|\\/|\\\\|\\,|\\:|\\;|\\-)/g, '');\n      this._element.innerText += '...';\n      if (this._element.scrollHeight > height) { // if ellipsis added caused overflow\n        this._element.innerText = this._element.innerText.substring(0, this._element.innerText.length - 3); // remove ellipsis\n        this._element.innerText = this._element.innerText.substring(0, this._element.innerText.length - this.words[i - 1].length - 1); // remove last word\n        this._element.innerText = this._element.innerText.substring(0, this._element.innerText.length - 1) + this._element.innerText[this._element.innerText.length - 1].replace(/(_|\\+|\\.|\\/|\\\\|\\,|\\:|\\;|\\-)/g, '');\n        this._element.innerText += '...';\n      }\n      return true;\n    }\n    // not yet overflown.. continue to add words\n    return false;\n  }\n\n  isTruncationNeeded() {\n    return this._element.scrollHeight > this._element.clientHeight;\n  }\n\n  isTextValid() {\n    return (typeof this._text === 'string' && this._text.length > 0);\n  }\n\n  getMaxHeight() {\n    let computedStyle = window.getComputedStyle(this._element, null),\n      maxHeightComputedStyle = 0, heightComputedStyle = 0;\n    if (computedStyle) {\n      maxHeightComputedStyle = parseInt(computedStyle.maxHeight, 10);\n      heightComputedStyle = parseInt(computedStyle.height, 10);\n    }\n\n    return Math.max(maxHeightComputedStyle, heightComputedStyle, this._element.clientHeight);\n  }\n\n  getTextFromElement() {\n    return this._element.innerText;\n  }\n\n  setHeightOnElement(height) {\n    if (!isNaN(height)) {\n      this._element.style.height = height + '%';\n    }\n  }\n\n  getWordsFromText() {\n    return this._text.split(' ');\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}